# SquareSpace

- If you're limited by the style editor, you can often use a `code block`...

# To-do

- Content feedback
    - Sticky anchor headers?
    - Missing content:
        - Comparison view
        - Navigation blurb
    - Comparison view
        - Use overlay for desktop as well.
        - More obvious way to exit the comparison mode (test with users)
    - Feature link
        - Better text position, taller image container (or maintain a nicer aspect ratio)
    - Simple events schedule
        - Colin calendar embed (need embed endpoint, maybe different view options)
        - Squarespace calendar (only monthly view)
        - Squarespace grid (not much space, finicky)
        - [Eventbrite embed](https://www.eventbrite.com/support/articles/en_US/How_To/how-to-sell-eventbrite-tickets-registrations-on-your-website-using-embeddable-widgets) (table...?)
- Content
    - Nested cells:
        - Size nested fonts (e.g: relative to screen size).
    - Missing pages:
        - Contact!
        - EU law popup?
- Finesse
    - Home info content stagger transitions.
- Home animations
    - Blob morphing hold shapes:
        - Pack in the whole metaball thing and go for morphing the nearest points out around the pointer instead, working more sympathetically with the shape?
            - Likely much better and more flexible, as we don't have to deal with flipping or turning when the morph happens, more sympathetic to the shape, probably more flexible.
            - Steps:
                - Target path upon pointer interaction:
                    - Change radius and pinch on presses etc.
                    - Mix it up with negative pinch (move away from pointer), etc.
        - Minimise "folding" during morph from shape to metaball:
            - Determine shape path's winding, to reduce "flips":
                - Work out the [winding clockwiseness](https://stackoverflow.com/questions/1165647/how-to-determine-if-a-list-of-polygon-points-are-in-clockwise-order)
                - Reverse metaball path if needed.
    - Drag/slide holds and fade background.
    - Speckled tiling background.
        - Configurable?
- Review feedback
    - Access:
        - Set up through `thisisyonder.squarespace.com` account.
            - Billing setup:
                - Holding site:
                    - When the staging site is ready to go live, cancel the subscription and remove the domain.
                - Staging site:
                    - Edit content and code.
                    - When ready, set up the new billing (Personal, or Business if needed), and point the domain to `thisisyonder.com`.
- Bugs and errors
    - Reset styles still doesn't work... times out I think?
    - Several things break when in edit mode... Squarespace LESS inconsistencies, unbelievable
        - Holds ring layout breaks within style editor.
        - Content styles don't update within style editor.
        - Some things seem to require a page refresh to take hold.
    - Others...?
- Document and instruct
    - The workaround for getting content into the holds comparison view - using a top-level "new row" action.
    - 2 Ways of doing the header banners:
        - With the Squarespace image poster layout and correct font settings (defaults)
        - With a `text-block`, `h1`, and header code injected `style` or `code-block` to give it a background image.
    - [Navigation links](https://support.squarespace.com/hc/en-us/articles/205814758-Using-links-in-your-navigation)
    - Arbitrary files (e.g: SVG):
        - [As file links](https://support.squarespace.com/hc/en-us/articles/205813928)
        - [As code blocks](https://answers.squarespace.com/questions/5898/can-i-upload-a-svg-file-to-the-image-block.html)
    - Info in odd places (e.g: [business info](https://support.squarespace.com/hc/en-us/articles/212872328))
    - Passing info per-page, for global menu color (where there's no categories/tags):
        - Header code injection - `<style>.yr-nav-button { color: #1D443D; }</style>`
- Design
    - Not clear you can scroll the nav menu on small screens...?
    - Contact page
    - Event detail page
    - SVG asset notes:
        - Inline styles (`CSS Properties: Style Attributes`)

# Done

- Content
    - Nested cells:
        - Collapse nested grids...
    - Missing pages:
        - 404 Page
- Home animations
    - Blob morphing hold shapes:
        - Pack in the whole metaball thing and go for morphing the nearest points out around the pointer instead, working more sympathetically with the shape?
            - Pointer will have a radius of influence and a factor of pinch - both variable.
            - Steps:
                - Input shape path.
                - Replace in-place with prepared path:
                    - Normalise to béziers.
                    - Subdivide béziers to given precision.
                - Target path upon pointer interaction:
                    - Any points within influence radius shift towards pointer, eased according to pinch factor.
        - Minimise "folding" during morph from shape to metaball:
            - After stupid red herring trying to transform before creating metaball...
            - We'll work with bézier curves for the metaball to simplify things.
            - Align starting points, to reduce "turns":
                - Might also be generalised to split the metaball at *every* point in the shape... but this would be more difficult than it's worth.
                - Split the metaball path at the point closest to the shape's starting point.
                - Nearest point on metaball path to a given shape point:
                    - Could try [a bézier-based approach to this](https://stackoverflow.com/a/44993719/716898), but seems unnecessarily complicated/specific (have to search curve-by-curve).
                    - Trying [a general approach to this](https://gist.github.com/mbostock/8027637), using `getPointAtLength` and other SVG path methods (polyfilled?).
                    - Want the nearest length along the path as the ouput of this, so we can next find the curve at that length, and then the length along that curve to split it.
                - Splitting the metaball path:
                    - Could try [a kinda general approach to this](http://bl.ocks.org/bycoffe/18441cddeb8fe147b719fab5e30b5d45), but seems less succinct (splitting the path into points and drawing new curves to connect them).
                    - Trying [a bézier-based approach to this](https://github.com/jasonHzq/bezier-utils/).
                        - Relies on getting the right bézier segment at a given length from the above nearest point search (`getPathSegAtLength`, which may need [a polyfill](https://github.com/progers/pathseg)).
                        - See also:
                            - [Alternative bézier splitting](https://github.com/tdzienniak/deCasteljau/blob/master/decasteljau.js)
                            - [Possible alternative for `getPathSegAtLength`](https://github.com/rveciana/svg-path-properties)
- Review feedback
    - Holds comparison view:
        - Small-screen, just modal the details over the top?
        - "Y" button to return to normal mode.
        - Content entry, single `block-field` with top-level rows delimiting content separations (document this).
    - Access:
        - Set up through `thisisyonder.squarespace.com` account.
            - Using a combined template won't really work (see test below) - we need a 2 template approach:
                - Can't sandbox off the areas (such as the shop) we need for the holding page.
                - Cleanest, though may mean a slight extra charge.
            - Billing setup:
                - Holding site:
                    - Switch to monthly cycle, so we lose less when we disable it (nice timing as we're at the end of the year).
                - Staging site:
                    - Just set up a new trial site on `thisisyonder.squarespace.com` account, and point the domain to `web-staging.thisisyonder.com`.
            - Should now have both templates up on Squarespace - the old one on the current domain, the new one on a subdomain.
        - Tested combined template approach for handling staging/holding together:
            - Turn on Developer Mode.
            - Clone old template repo.
            - Locally, set up the combination of the 2 sites:
                - Create a static page with all the old website content (static download, as a backup).
                - Build and test that - transferring anything you need to across from regular content to the static page.
                - Once that's working OK, copy all the files from the new site's repo.
                - Set up separate regions/layouts for the homepage holding page.
                - Move all the (used) parts of the old site into the new region structure.
                - Namespace the old styles, taking care with any global variables, tweaks, etc.
                - Update any references to scripts, blocks, etc to load the old ones.
                - See if you can figure out how to deal with the old collections - might need to just copy in the static HTML there as a `code-block` or something.
                - If layouts switching isn't working, try just using conditional `apply`.
                - Build that site, test.
        - Set up on main site subdomain until ready for release - `web-staging.thisisyonder.com`.
        - Give them your account details for now, so they can play and look around.
- Bugs and errors
    - Broken image block layouts...?
    - Fix little bug in pair info edit, refresh the DOM references when CMS edits occur.
    - Sort out Style Editor breakage bullshit - #3302864
        - Fix the font's `/count` failing HTTP request.
- Home menu comparison view
    - Do some amount with CSS: toggle details mode, toggle details `block-field`... that's probably it.
    - JS controller needed to toggle for selected pair only.
    - Due to limitations with JSON-T logic, will need to use some other way to hold all the description content (pairs: `nC2`; `n = 5 => 5C2 = 10`):
        - Using `code-block` to just code it by hand?
        - A single `block-field`, with some specified arrangement of content blocks?
            - Inconsistent layout engine might fuck this up... use 2-column layout to make it more predictable...?
        - Specifed extra menu items?
            - Using `description` field sucks, and how to tell which item belongs where...?
        - Multiple `block-field`s?
            - Won't work... not having access to outermost index prevents the nested loop we need.
            - Generate `n^2`, and only ever show unique pair combos of them?
- Finish AJAX loading
    - Page animations
- Block out main zones and animations
- Content
    - (Ignored: unnecessary) Ensure colors per section work where native CSS variables don't (JS fallback, setting theme number?)
    - Custom overrides for certain interior blocks
        - Give a simple `class`-based way for editors to enable the more complex tweak-based overrides on an individual basis (say, JS class switching in header-code-injection).
        - Pick certain existing blocks to custom decorate?
        - Use `code blocks` with given code if really needed...
        - Header code injection, add a `style` and target the `#block-xxx` IDs
    - Alternating background color overlay
    - Fix weird image positioning bug
    - Colors per section
    - Responsive wrapping columns, but only for full-width rows...?
- Fonts and typography
    - Go through content variations
    - [Buy](https://www.myfonts.com/cart/432948577)
    - Sort out the sidebar etc styles again.
- SVG holds
    - Multiple themes in style editor... clunky but needed? Improve with JS rather than JSON-T / Style Editor.
    - Centered and scaled SVGs (remove current `transform` workaround)
    - Strokes
    - Configurable by CMS?
        - Hold SVG inline images (`code block`)
        - Number of holds (consider color themes too)
            - Hacky... can tweak values create new tweaks? Like have a value tweak for number of holds, and generate enough corresponding tweaks in LESS...?
- Main navigation
    - Switch from background image tweak to open block field...
    - Dark/light colors - switch based on what's beneath (not always clear), or have floating header bar appear?
- Design
    - New hold SVG assets
        - Centered within 200x200 canvas, covering size, around text
        - All borders present
    - Dark/light colors - switch based on what's beneath (not always clear), or have floating header bar appear?
- Decide how to configure the landing page holds
    - Secondary navigation links
- Set up [Webpack](https://github.com/webpack-contrib/extract-text-webpack-plugin/blob/webpack-1/README.md) with [Autoprefixer](https://github.com/postcss/autoprefixer#webpack) and [LESS](https://github.com/webpack-contrib/less-loader)?
    - Currently working with Squarespace's weird divergent LESS implementation; prefixes etc are tricky.
    - Parking for now, as prefixing isn't as big an issue as it once was (for our current needs at least).